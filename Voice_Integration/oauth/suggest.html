<html>
<head>
    <script src="https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-suggest-with-polyfills-latest.js"></script>
</head>
<body>
    <script>
        YaAuthSuggest.init(
            {
                client_id: '7155b77129fc43bc87017de2b92bcfb9',
                response_type: 'token',
                redirect_uri: 'https://smarthome.tsar-ioann.ru/api/oauth/token'
            },
            'https://smarthome.tsar-ioann.ru'
        )
        .then(({handler}) => handler())
        .then(data => {
            const urlParams = new URLSearchParams(window.location.search);
            window.location.replace(urlParams.get('redirect_uri') + window.location.search + '&code=' + data['access_token'])
        })
        .catch(error => console.log('Error happened', error));
    </script>
</body>
</html>
